if(mapboxgl.accessToken="pk.eyJ1IjoicmFrYW5vbmxpbmUiLCJhIjoiY2xjeGpsMmdxMG05ajN2cXJocm5mazV3diJ9.puFe2Kj4KfE5v9Ky20ohYg",mapboxgl.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",null,!0),""!=$("#coordinates_selected").val()){var coordinates=$("#coordinates_selected").val(),array=coordinates.split(",");on_load_map(array[0],array[1]),map_initialiaze()}function reverse(e,a){var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+(e=e)+","+(a=a)+".json?country=sa&access_token=pk.eyJ1IjoicmFrYW5vbmxpbmUiLCJhIjoiY2xjeGpsMmdxMG05ajN2cXJocm5mazV3diJ9.puFe2Kj4KfE5v9Ky20ohYg";$.ajax({type:"get",url:o,success:function(e){$(".mapboxgl-ctrl-geocoder--input").val(e.features[0].place_name)}})}function on_load_map(e,a){var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+(e=e)+","+(a=a)+".json?country=sa&access_token=pk.eyJ1IjoicmFrYW5vbmxpbmUiLCJhIjoiY2xjeGpsMmdxMG05ajN2cXJocm5mazV3diJ9.puFe2Kj4KfE5v9Ky20ohYg";$.ajax({type:"get",url:o,success:function(e){$("#location").val(e.features[0].place_name)}})}function map_initialiaze(){if(mapboxgl.accessToken="pk.eyJ1IjoicmFrYW5vbmxpbmUiLCJhIjoiY2xjeGpsMmdxMG05ajN2cXJocm5mazV3diJ9.puFe2Kj4KfE5v9Ky20ohYg",""!=$("#coordinates_selected").val()){$("#map_display").css("border-radius","10px"),$("#map_display").css("border","1px solid black");var e=$("#coordinates_selected").val().split(",");const a=new mapboxgl.Map({container:"map_display",style:"mapbox://styles/mapbox/streets-v12",center:[e[0],e[1]],zoom:13,interactive:!0});new mapboxgl.Marker({draggable:!0}).setLngLat([e[0],e[1]]).addTo(a);a.on("load",()=>{a.addSource("mine",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e[0],e[1]]}}]}}),a.addLayer({id:"mylayer",source:"mine",type:"circle",paint:{"circle-radius":50,"circle-color":"#1da1f2","circle-stroke-color":"red","circle-opacity":.2,"circle-stroke-opacity":.5,"circle-stroke-width":5}})})}}$("#map_modal").on("hidden.bs.modal",function(e){map_initialiaze()}),$("#save_coordinates").click(function(){$("#location").val("");var e=$(".mapboxgl-ctrl-geocoder--input").val();$("#location").val(e),$("#map_modal").modal("hide")}),$("#location").click(function(){var e=$("#city_val").val(),a=$("#district_val").val();if(""==e)return Sweet("error","Please provide city!"),!1;if(""==a)return Sweet("error","Please provide district!"),!1;$("#map_modal").modal("show");e=$("#city_val :selected").text(),a=$("#district_val :selected").text();"Ad Dilam"==e&&(e="addilam"),mapboxSdk({accessToken:mapboxgl.accessToken}).geocoding.forwardGeocode({query:a+", "+e,countries:["sa"],autocomplete:!0,limit:1}).send().then(e=>{var a="";a=e&&e.body&&e.body.features&&e.body.features.length?e.body.features[0].center:[46.710802261,24.632292401];const o=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:a,zoom:12});(new mapboxgl.Marker).setLngLat(a).addTo(o);var t="Search location in KSA";"ar"==locale&&(t="موقع البحث في المملكة العربية السعودية");const c=new MapboxGeocoder({autocomplete:!0,accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl,marker:!0,placeholder:t,limit:10});o.addControl(c),o.on("load",()=>{o.resize(),o.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),o.addLayer({id:"point",source:"single-point",type:"circle",paint:{"circle-radius":10,"circle-color":"#1da1f2"}})});const l=new mapboxgl.Marker({draggable:!0}).setLngLat(a).addTo(o);l.on("dragend",function(){const e=l.getLngLat();$(".mapboxgl-ctrl-geocoder--input").val(""),$("#coordinates_selected").val(""),$("#coordinates_selected").val(e.lng+","+e.lat),reverse(e.lng,e.lat)}),c.on("result",e=>{o.getSource("single-point").setData(e.result.geometry);var a=new mapboxgl.Marker({draggable:!0,color:"#1da1f2"}).setLngLat(e.result.center).addTo(o);$("#coordinates_selected").val(""),$("#coordinates_selected").val(e.result.center[0]+","+e.result.center[1]),a.on("dragend",function(e){var a=e.target.getLngLat();$(".mapboxgl-ctrl-geocoder--input").val(""),$("#coordinates_selected").val(""),$("#coordinates_selected").val(a.lng+","+a.lat),reverse(a.lng,a.lat)})})})}),$(document).ready(function(){if(""!=$("#city_val :selected").val()){var e=$("#city_val :selected").val();get_already_select_district(e)}$("#city_val").on("change",function(){$("#coordinates_selected").val(""),$("#location").val("");var e=this.value;get_already_select_district(e)});var a="rtl";"en"==locale&&(a="ltr"),$("#city_val").select2({dir:a})});