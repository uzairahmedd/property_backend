var term_id=$("#term_id").val();function Load_land_block_map(e){var t=$("#base_url").val(),o=t+"Land_block_data/"+e;$.ajax({url:o,type:"GET",success:function(e){if("success"==e.status){var o=e.data.property.post_district.value.split(",");mapboxgl.accessToken="pk.eyJ1IjoicmFrYW5vbmxpbmUiLCJhIjoiY2xjeGpsMmdxMG05ajN2cXJocm5mazV3diJ9.puFe2Kj4KfE5v9Ky20ohYg",mapboxgl.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",null,!0);const t=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/satellite-streets-v12",center:[o[0],o[1]],zoom:1.5});let l=null;var a={type:"FeatureCollection",features:e.data.map};t.on("load",()=>{t.addSource("maine",{type:"geojson",generateId:!0,data:a}),t.on("click",function(e){var o=t.queryRenderedFeatures(e.point,{layers:["land-fills"]});if(o.length){void 0!==t.getLayer("click-color")&&(t.removeLayer("click-color"),t.removeSource("click-color"));var a=o[0],l=o[0].properties.name+" Land";"ar"==locale&&(l=o[0].properties.name+" أرض"),$("#piece_no").text(o[0].properties.plot_num),$("#price_piece").text(o[0].properties.price),$("#type").text(l),$("#planned_number").text(o[0].properties.planned_number),$("#area_land").text(o[0].properties.total_area),$("#left_area").text(o[0].properties.left_measurement),$("#right_area").text(o[0].properties.right_measurement),$("#top_area").text(o[0].properties.top_measurement),$("#bottom_area").text(o[0].properties.bottom_measurement),t.addSource("click-color",{type:"geojson",data:a.toJSON()}),t.addLayer({id:"click-color",type:"fill",source:"click-color",layout:{},paint:{"fill-color":"white","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.1,.5]}},"points-measuements")}}),t.on("click",function(e){var o=t.queryRenderedFeatures(e.point,{layers:["commercial-land-fills"]});if(o.length){void 0!==t.getLayer("click-color")&&(t.removeLayer("click-color"),t.removeSource("click-color"));var a=o[0];$("#piece_no").text(o[0].properties.plot_num),$("#price_piece").text(o[0].properties.price),t.addSource("click-color",{type:"geojson",data:a.toJSON()}),t.addLayer({id:"click-color",type:"fill",source:"click-color",layout:{},paint:{"fill-color":"white","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.1,.5]}},"points-measuements")}}),t.on("mouseenter","land-fills",()=>{t.getCanvas().style.cursor="pointer"}),t.on("mouseleave","land-fills",()=>{t.getCanvas().style.cursor=""}),t.on("mouseenter","commercial-land-fills",()=>{t.getCanvas().style.cursor="pointer"}),t.on("mouseleave","commercial-land-fills",()=>{t.getCanvas().style.cursor=""}),t.addLayer({id:"land-fills",type:"fill",source:"maine",layout:{},paint:{"fill-color":"#fffd8d","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.3,.5]}}),t.addLayer({id:"commercial-land-fills",type:"fill",source:"maine",layout:{},paint:{"fill-color":"red","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.3,.5]},filter:["==",["get","type"],"Commercial"]}),t.addLayer({id:"state-borders",type:"line",source:"maine",layout:{},paint:{"line-color":"white","line-width":1}}),t.on("mousemove","land-fills",e=>{e.features.length>0&&(null!==l&&t.setFeatureState({source:"maine",id:l},{hover:!1}),l=e.features[0].id,t.setFeatureState({source:"maine",id:l},{hover:!0}))}),t.on("mousemove","commercial-land-fills",e=>{e.features.length>0&&(null!==l&&t.setFeatureState({source:"maine",id:l},{hover:!1}),l=e.features[0].id,t.setFeatureState({source:"maine",id:l},{hover:!0}))}),t.on("mouseleave","land-fills",()=>{null!==l&&t.setFeatureState({source:"maine",id:l},{hover:!1}),l=null}),t.on("mouseleave","commercial-land-fills",()=>{null!==l&&t.setFeatureState({source:"maine",id:l},{hover:!1}),l=null}),t.addLayer({id:"points-measuements",type:"symbol",source:"maine",minzoom:15,paint:{"text-color":"#ffffff"},layout:{"text-field":["get","plot_num"],"text-font":["Arial Unicode MS Bold"],"text-size":11},filter:["==","$type","Point"]}),t.flyTo({center:[o[0],o[1]],zoom:14,duration:5e3}),on_load_map(o[0],o[1])}),t.addControl(new mapboxgl.NavigationControl)}else"error"==e.status&&$("#map").prepend('<div style="height:450px; width:100%;" class="d-flex justify-content-center"><img class="error-map-img" src='+t+"assets/images/error.jpg /></div>")}})}function on_load_map(e,t){var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+(e=e)+","+(t=t)+".json?country=sa&access_token=pk.eyJ1IjoicmFrYW5vbmxpbmUiLCJhIjoiY2xjeGpsMmdxMG05ajN2cXJocm5mazV3diJ9.puFe2Kj4KfE5v9Ky20ohYg";$.ajax({type:"get",url:o,success:function(e){$("#full_address").text(e.features[0].place_name)}})}Load_land_block_map(term_id);
